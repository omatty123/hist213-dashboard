<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Joseon Population 1590-1820</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: system-ui, sans-serif;
            background: #fff;
            padding: 20px;
            max-width: 700px;
            margin: 0 auto;
        }
        h2 {
            text-align: center;
            font-size: 16px;
            margin-bottom: 5px;
        }
        .subtitle {
            text-align: center;
            font-size: 11px;
            color: #666;
            margin-bottom: 15px;
        }
        .chart-container {
            position: relative;
            height: 280px;
        }
        .notes {
            font-size: 10px;
            color: #666;
            margin-top: 15px;
            line-height: 1.4;
        }
        .event-label {
            font-size: 9px;
            color: #dc2626;
        }
    </style>
</head>
<body>
    <h2>Joseon Korea Population Estimates, 1590-1820</h2>
    <div class="subtitle">Millions of people (entire peninsula)</div>

    <div class="chart-container">
        <canvas id="popChart"></canvas>
    </div>

    <div class="notes">
        <strong>Key events:</strong> Imjin War (1592-98), Manchu invasions (1627, 1637),
        Sirhak reform era (1650-1800), Great Famine (1810s)<br>
        <strong>Sources:</strong> Statista, Seoul Journal of Economics, historical estimates
    </div>

    <script>
        const ctx = document.getElementById('popChart').getContext('2d');

        // Estimated population data points (in millions)
        const data = {
            labels: ['1590', '1600', '1650', '1700', '1750', '1800', '1810', '1820'],
            datasets: [{
                label: 'Population (millions)',
                data: [14, 9, 10, 12, 15, 18.5, 18.5, 16.2],
                borderColor: '#2563eb',
                backgroundColor: 'rgba(37, 99, 235, 0.1)',
                fill: true,
                tension: 0.3,
                pointRadius: 5,
                pointBackgroundColor: '#2563eb'
            }]
        };

        // Annotations for key events
        const annotations = [
            { x: '1600', text: 'Post-Imjin War' },
            { x: '1650', text: 'Recovery begins' },
            { x: '1810', text: 'Famine crisis' }
        ];

        new Chart(ctx, {
            type: 'line',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed.y + ' million';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 5,
                        max: 22,
                        title: {
                            display: true,
                            text: 'Millions',
                            font: { size: 11 }
                        },
                        ticks: {
                            callback: function(value) {
                                return value + 'M';
                            }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Year',
                            font: { size: 11 }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
